#!/usr/bin/env ruby
# Script para carregar dados de demonstraÃ§Ã£o
# Uso: bin/load_demo_data

require_relative '../config/environment'

puts "ğŸ­ Carregador de Dados de DemonstraÃ§Ã£o"
puts "=====================================\n"

# Verifica ambiente
unless Rails.env.development?
  puts "âŒ Este script sÃ³ funciona em desenvolvimento!"
  puts "   Ambiente atual: #{Rails.env}"
  exit 1
end

# Mostra estado atual
current_count = User.count
puts "ğŸ“Š Estado atual: #{current_count} usuÃ¡rios no banco\n"

# Confirma se deve carregar dados demo
if current_count > 20
  print "âš ï¸  JÃ¡ existem muitos usuÃ¡rios (#{current_count}). Carregar dados demo mesmo assim? (s/N): "
  confirmation = gets.chomp.downcase
  
  unless %w[s sim y yes].include?(confirmation)
    puts "âŒ OperaÃ§Ã£o cancelada."
    exit 0
  end
end

puts "ğŸŒ± Carregando dados de demonstraÃ§Ã£o...\n"

begin
  # Carrega o arquivo de demo data
  load Rails.root.join('db', 'seeds', 'demo_data.rb')
  
  puts "\nâœ… Dados de demonstraÃ§Ã£o carregados com sucesso!"
  
rescue => e
  puts "\nâŒ Erro ao carregar dados de demonstraÃ§Ã£o:"
  puts "   #{e.message}"
  puts "   #{e.backtrace.first}"
  exit 1
end
